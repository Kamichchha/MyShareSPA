(function(){angular.module("myShareApp",["ngRoute","ui.bootstrap"]);var t=function(t,o){t.when("/",{templateUrl:"home/home.view.html",controller:"stockListCtrl",controllerAs:"stockListVM"}).when("/stock/:stockId",{templateUrl:"stock-details/stock-details.view.html",controller:"stockDetailsCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"about/about.view.html",controller:"aboutCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});o.html5Mode(true)};angular.module("myShareApp").config(["$routeProvider","$locationProvider",t])})();(function(){t.$inject=["$scope","stockService","getLocationService","$uibModal"];function t(t,o,e,a){stockListVM=this;stockListVM.message="Loading stocks list";stockListVM.locMessage="Fetching your location...";stockListVM.pageHeader={title:"MyShare",strapLine:"    Ideas that can change your life..."};o.getData().then(function(t){stockListVM.stockList=t.data;stockListVM.message=t.data.length>0?"":"No stocks found."},function(t){console.log(t);stockListVM.message="Something went wrong!!!"});stockListVM.loadLocation=function(o){t.$apply(function(){stockListVM.locMessage="You'r at : "+o.coords.latitude+" ,"+o.coords.longitude})};stockListVM.errorLocation=function(o){t.$apply(function(){stockListVM.locMessage=""})};stockListVM.noLocation=function(){t.$apply(function(){stockListVM.locMessage="Browser doesn't support geolocation"})};stockListVM.loadData=function(){o.getData().then(function(t){stockListVM.stockList=t.data;stockListVM.message=t.data.length>0?"":"No stocks found."},function(t){console.log(t);stockListVM.message="Something went wrong!!!"})};e.getLocData(stockListVM.loadLocation,stockListVM.errorLocation,stockListVM.noLocation);stockListVM.addStockForm=function(){var t=a.open({templateUrl:"stock-details/add-stock.modal.html",controller:"addStockCtrl",controllerAs:"vm",size:"lg"});t.result.then(function(t){stockListVM.stockList.push(t)})};stockListVM.updateStockForm=function(t){var o=a.open({templateUrl:"stock-details/update-stock.modal.html",controller:"updateStockCtrl",controllerAs:"vm",size:"lg",resolve:{updateData:function(){return{stockId:t}}}});o.result.then(function(t){stockListVM.loadData()})};stockListVM.deleteStock=function(t){o.deleteStock(t).success(function(){stockListVM.loadData()}).error(function(t){console.log(t)})}}angular.module("myShareApp").controller("stockListCtrl",t)})();(function(){t.$inject=["stockService","$uibModal","$routeParams"];function t(t,o,e){vm=this;vm.stockId=e.stockId;t.getStockById(vm.stockId).success(function(t){vm.stock=t}).error(function(t){console.log(t)});vm.popUpReviewForm=function(){var t=o.open({templateUrl:"review/add-review.modal.html",controller:"addReviewModalCtrl",controllerAs:"vm",resolve:{stockData:function(){return{stockId:vm.stockId,stockName:vm.stock.stockName}}}});t.result.then(function(t){vm.stock.reviews.push(t)})};vm.content={title:"About Us",data:"    Ideas that can change your life..."}}angular.module("myShareApp").controller("stockDetailsCtrl",t)})();(function(){t.$inject=["stockService","$uibModalInstance"];function t(t,o){var e=this;e.addStock=function(){e.error="";e.stockData={stockName:e.stockName,stockCode:e.stockCode,volume:e.volume,currPrice:e.currPrice,wkHigh52:e.wk52High,wkLow52:e.wk52Low};e.stockData.category=[];e.stockData.category.push(e.industry);e.stockData.category.push(e.sector);t.addStock(e.stockData).success(function(t){o.close(t)}).error(function(t){e.error="Error saving stock, please try again";return false})};e.onCancel=function(){o.dismiss("cancel")}}angular.module("myShareApp").controller("addStockCtrl",t)})();(function(){t.$inject=["stockService","updateData","$uibModalInstance"];function t(t,o,e){var a=this;a.stockId=o.stockId;t.getStockById(a.stockId).success(function(t){a.stockData=t;a.stockData.industry=t.category[0];a.stockData.sector=t.category[1]}).error(function(t){console.log(t)});a.onUpdate=function(){a.error="";a.updatedData={stockName:a.stockData.stockName,stockCode:a.stockData.stockCode,volume:a.stockData.volume,currPrice:a.stockData.currPrice,wkHigh52:a.stockData.wkHigh52,wkLow52:a.stockData.wkLow52};a.updatedData.category=[];a.updatedData.category.push(a.stockData.industry);a.updatedData.category.push(a.stockData.sector);t.updateStock(a.stockId,a.updatedData).success(function(t){e.close(t);return false}).error(function(t){a.error="Error updating stock, please try again";return false})};a.onCancel=function(){e.dismiss("cancel")}}angular.module("myShareApp").controller("updateStockCtrl",t)})();(function(){function t(){vm=this;vm.content={title:"About Us",data:"    Ideas that can change your life..."}}angular.module("myShareApp").controller("aboutCtrl",t)})();(function(){t.$inject=["$uibModalInstance","stockData","stockService"];function t(t,o,e){var a=this;a.stockData=o;a.formData={};a.onSubmit=function(){a.formData.error="";if(!a.formData.name||!a.formData.comment){a.formData.error="All fields required, please try again";return false}else{a.saveData(a.stockData.stockId,a.formData);return false}};a.modal={cancel:function(){t.dismiss("cancel")},close:function(o){t.close(o)}};a.saveData=function(t,o){e.addReviewById(t,{author:o.name,comment:o.comment}).success(function(t){a.modal.close(t)}).error(function(t){console.log(t);a.formData.error="Error saving review, please try again"})}}angular.module("myShareApp").controller("addReviewModalCtrl",t)})();(function(){var t=function(){var t=function(t,o,e){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(t,o)}else{e()}};return{getLocData:t}};angular.module("myShareApp").service("getLocationService",t)})();(function(){t.$inject=["$http"];function t(t){var o=function(){return t.get("/api/stock")};var e=function(o){return t.get("/api/stock/"+o)};var a=function(o,e){return t.post("/api/stock/"+o+"/comment",e)};var c=function(o){return t.post("/api/stock",o)};var n=function(o,e){return t.put("/api/stock/"+o,e)};var r=function(o){return t.delete("/api/stock/"+o)};return{getData:o,getStockById:e,addReviewById:a,addStock:c,updateStock:n,deleteStock:r}}angular.module("myShareApp").service("stockService",t)})();(function(){var t=function(){return function(t){var o=t.toString();if(o.length<=3){return t}t=o.substring(0,o.length-3)+","+o.substring(o.length-3);return t}};angular.module("myShareApp").filter("formatVolume",t)})();(function(){var t=function(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader.html"}};angular.module("myShareApp").directive("pageHeader",t)})();(function(){var t=function(){return{restrict:"EA",templateUrl:"/common/directives/myShareNavigation.html"}};angular.module("myShareApp").directive("navigation",t)})();(function(){var t=function(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric.html"}};angular.module("myShareApp").directive("footerGeneric",t)})();